<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact the Research Team | HiMMP Metal Production Study</title>
    <meta name="description" content="Get in touch with the HiMMP research team to discuss collaboration opportunities, academic inquiries, or questions about heaviness in metal music production.">
    <meta name="keywords" content="metal music researchers contact, music production experts, academic collaboration, University of Huddersfield music tech, metal studies researchers">
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <!-- Favicon -->
    <link rel="icon" href="favicon.png" type="image/x-icon">
    <style>
        /* Form validation styles */
        .error-message {
            color: #e74c3c;
            font-size: 0.9rem;
            margin-top: 5px;
            transition: all 0.3s ease;
        }

        input.invalid,
        textarea.invalid,
        select.invalid {
            border-color: #e74c3c;
            background-color: rgba(231, 76, 60, 0.05);
        }

        input.valid,
        textarea.valid,
        select.valid {
            border-color: #27ae60;
        }

        /* Submission message styles */
        .submission-message {
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            text-align: center;
        }

        .submission-message.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .submission-message.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .submission-message.info {
            background-color: #cce5ff;
            color: #004085;
            border: 1px solid #b8daff;
        }

        /* Form row styling for side-by-side fields */
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }

        .form-group.half {
            flex: 0 0 50%;
            padding: 0 10px;
        }

        @media screen and (max-width: 767px) {
            .form-group.half {
                flex: 0 0 100%;
            }
        }

        /* Required field indicator */
        .required {
            color: #e74c3c;
        }
        
        /* Loading spinner */
        .form-loading button[type="submit"] {
            position: relative;
            padding-right: 40px;
        }
        
        .form-loading button[type="submit"]::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: translateY(-50%) rotate(360deg); }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <img src="assets/images/logos/HiMMP-logo-small.png" alt="HiMMP - Heaviness in Metal Music Production" class="logo-image">
                </a>
            </div>
            <nav class="main-nav">
                <button class="menu-toggle" aria-label="Toggle Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav-links">
                    <li><a href="index.html">welcome</a></li>
                    <li><a href="about.html">about</a></li>
                    <li><a href="approach.html">approach</a></li>
                    <li><a href="team.html">team</a></li>
                    <li><a href="publications.html">publications</a></li>
                    <li><a href="videos.html">videos</a></li>
                    <li><a href="audio.html">audio</a></li>
                    <li><a href="updates.html">updates</a></li>
                    <li><a href="contact.html" class="active">contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero" style="background-image: url('assets/images/background/HiMMP-bg-contact.jpg'); background-size: cover; background-position: center; position: relative;">
            <div class="hero-overlay"></div>
            <div class="container">
                <div class="hero-content">
                    <h2 class="hero-title">Get in Touch</h2>
                    <p class="hero-text">
                        If you have any questions about the HiMMP project, please get in
                        touch with us via email.
                    </p>
                    <p class="hero-text">
                        We're always interested in increasing our impact and outreach, 
                        so let us know if you're interested in getting involved...
                    </p>
                </div>
            </div>
        </section>

        <section class="content-section contact-section">
            <div class="container">
                <style>
                    .contact-card {
                        background-color: #fff;
                        border-radius: 8px;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
                        padding: 30px;
                        margin-bottom: 30px;
                        transition: transform 0.3s ease, box-shadow 0.3s ease;
                    }
                    
                    .contact-card:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 8px 24px rgba(0,0,0,0.1);
                    }
                    
                    .contact-card h3 {
                        color: #333;
                        margin-top: 0;
                        margin-bottom: 20px;
                        font-size: 1.5rem;
                        border-bottom: 2px solid #f0f0f0;
                        padding-bottom: 10px;
                    }
                    
                    .contact-card-icon {
                        font-size: 2rem;
                        margin-bottom: 15px;
                        color: #555;
                    }
                    
                    .contact-email {
                        font-size: 1.2rem;
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-radius: 5px;
                        margin: 20px 0;
                        text-align: center;
                        border: 1px solid #e9ecef;
                    }
                    
                    .contact-email-highlight {
                        font-weight: bold;
                        color: #333;
                    }
                    
                    .contact-list {
                        list-style-type: none;
                        padding-left: 0;
                        margin-bottom: 0;
                    }
                    
                    .contact-list li {
                        padding: 8px 0;
                        position: relative;
                        padding-left: 25px;
                    }
                    
                    .contact-list li:before {
                        content: "â€¢";
                        position: absolute;
                        left: 0;
                        color: #555;
                        font-weight: bold;
                    }
                    
                    .contact-grid {
                        display: grid;
                        grid-template-columns: repeat(2, 1fr);
                        gap: 30px;
                    }
                    
                    @media screen and (max-width: 767px) {
                        .contact-grid {
                            grid-template-columns: 1fr;
                        }
                    }
                    
                    .copy-button {
                        background-color: #555;
                        color: white;
                        border: none;
                        padding: 8px 15px;
                        border-radius: 4px;
                        cursor: pointer;
                        font-size: 0.9rem;
                        transition: background-color 0.3s ease;
                        margin-top: 10px;
                    }
                    
                    .copy-button:hover {
                        background-color: #333;
                    }
                    
                    .copy-success {
                        color: #28a745;
                        font-size: 0.9rem;
                        margin-top: 5px;
                        display: none;
                    }
                </style>
                
                <div class="contact-grid">
                    <div class="contact-card">
                        <h3> <span class="highlight-text">Contact Us</span></h3>
                        <p>For all inquiries related to the HiMMP project, please contact us via email:</p>
                        
                        <div class="contact-email">
                            <span class="contact-email-highlight">j.herbst[at]hud[dot]ac.uk</span>
                        </div>
                        
                        <div style="text-align: center;">
                            <button id="copy-email" class="copy-button">Copy Email Address</button>
                            <div id="copy-success" class="copy-success">Email copied to clipboard!</div>
                        </div>
                    </div>
                    
                    <div class="contact-card">
                        <h3> <span class="highlight-text">When to Contact Us</span></h3>
                        <ul class="contact-list">
                            <li>Research collaboration opportunities</li>
                            <li>Academic inquiries about metal music production</li>
                            <li>Questions about the HiMMP project</li>
                            <li>Media inquiries and interview requests</li>
                            <li>Access to research materials and publications</li>
                        </ul>
                    </div>
                    
                    <div class="contact-card">
                        <h3> <span class="highlight-text">What to Include</span></h3>
                        <p>To help us respond to your inquiry efficiently, please include:</p>
                        <ul class="contact-list">
                            <li>Your name and affiliation</li>
                            <li>A clear subject line referencing HiMMP</li>
                            <li>Brief description of your inquiry or interest</li>
                            <li>Any relevant deadlines or timeframes</li>
                        </ul>
                    </div>
                    
                    <div class="contact-card">
                        <h3> <span class="highlight-text">Response Time</span></h3>
                        <p>We aim to respond to all inquiries within 3-5 working days.</p>
                        <p>For urgent matters, please indicate this in your subject line.</p>
                        <p>During academic holidays or conference periods, response times may be longer.</p>
                        <p>Thank you for your interest in the HiMMP project!</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-logos">
                <div class="university-logo">
                    <img src="assets/images/logos/university-logo-white.png" alt="University of Huddersfield Logo" class="footer-logo">
                </div>
                <div class="himmp-logo">
                    <img src="assets/images/logos/HiMMP-Full-Horiz.png" alt="HiMMP Logo" class="footer-logo">
                </div>
                <div class="ahrc-logo">
                    <img src="assets/images/logos/AHRC-logo.png" alt="Arts and Humanities Research Council Logo" class="footer-logo">
                </div>
            </div>
            <div class="footer-info">
                <p>HiMMP is based within the School of Arts and Humanities (AH) and Computing and Engineering (C&E) at the University of Huddersfield. <span class="highlight-text">Â© University of Huddersfield</span> // All rights reserved // The HiMMP Project is supported by the Arts and Humanities Research Council (AHRC) in the United Kingdom.</p>
            </div>
            <nav class="footer-nav">
                <ul>
                    <li><a href="about.html"><span class="highlight-text">About HiMMP</span></a></li>
                    <li><a href="approach.html"><span class="highlight-text">Approach</span></a></li>
                    <li><a href="team.html"><span class="highlight-text">Team</span></a></li>
                    <li><a href="contact.html"><span class="highlight-text">Contact</span></a></li>
                    <li><a href="privacy.html"><span class="highlight-text">Privacy Policy</span></a></li>
                </ul>
            </nav>
        </div>
    </footer>

    <script src="assets/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Email copy functionality
            const copyEmailBtn = document.getElementById('copy-email');
            const copySuccess = document.getElementById('copy-success');
            
            if (copyEmailBtn) {
                copyEmailBtn.addEventListener('click', function() {
                    // Get the email address and convert the [at] and [dot] to @ and .
                    const emailText = 'j.herbst@hud.ac.uk';
                    
                    // Copy to clipboard
                    navigator.clipboard.writeText(emailText).then(function() {
                        // Show success message
                        copySuccess.style.display = 'block';
                        
                        // Hide after 3 seconds
                        setTimeout(function() {
                            copySuccess.style.display = 'none';
                        }, 3000);
                    }).catch(function(err) {
                        console.error('Could not copy text: ', err);
                        alert('Failed to copy email address. Please copy it manually.');
                    });
                });
            }
            
            const form = document.getElementById('contact-form');
            const statusMessage = document.getElementById('status-message');
            
            if (form) {
                // Handle form submission
                form.addEventListener('submit', function(event) {
                    event.preventDefault();
                    
                    // Clear any previous messages
                    statusMessage.innerHTML = '';
                    
                    // Validate form
                    if (!validateForm()) {
                        return;
                    }
                    
                    // Show loading state
                    form.classList.add('form-loading');
                    const submitBtn = form.querySelector('button[type="submit"]');
                    const originalBtnText = submitBtn.textContent;
                    submitBtn.textContent = 'Sending...';
                    submitBtn.disabled = true;
                    
                    // Show initial processing message
                    statusMessage.innerHTML = '<div class="submission-message info">Sending your message...</div>';
                    statusMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    
                    // Collect form data
                    const formData = new FormData(form);
                    
                    // Submit the form to PHP handler
                    fetch('contact-handler.php', {
                        method: 'POST',
                        body: formData
                    })
                    .then(response => {
                        // Check if the response is JSON
                        const contentType = response.headers.get('content-type');
                        if (!contentType || !contentType.includes('application/json')) {
                            throw new Error('Server returned non-JSON response');
                        }
                        
                        if (!response.ok) {
                            throw new Error(`Server error: ${response.status} ${response.statusText}`);
                        }
                        
                        return response.json();
                    })
                    .then(data => {
                        // Reset loading state
                        form.classList.remove('form-loading');
                        submitBtn.textContent = originalBtnText;
                        submitBtn.disabled = false;
                        
                        if (data.success) {
                            // Show success message
                            statusMessage.innerHTML = `<div class="submission-message success">${data.message || 'Thank you for your message! We will get back to you soon.'}</div>`;
                            
                            // Reset form
                            form.reset();
                            
                            // Remove valid classes
                            form.querySelectorAll('.valid').forEach(element => {
                                element.classList.remove('valid');
                            });
                            
                            // Disable the submit button for a short period to prevent double submissions
                            submitBtn.disabled = true;
                            setTimeout(() => {
                                submitBtn.disabled = false;
                            }, 3000);
                        } else {
                            // Show error message from server
                            statusMessage.innerHTML = `<div class="submission-message error">${data.message || 'There was a problem submitting your form. Please try again later.'}</div>`;
                            console.error('Form submission error:', data);
                        }
                        
                        // Scroll to the message
                        statusMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    })
                    .catch(error => {
                        // Reset loading state
                        form.classList.remove('form-loading');
                        submitBtn.textContent = originalBtnText;
                        submitBtn.disabled = false;
                        
                        // Show error message
                        statusMessage.innerHTML = '<div class="submission-message error">There was a problem submitting your form. Please try again or contact us directly at j.herbst@hud.ac.uk.</div>';
                        console.error('Form submission error:', error);
                        
                        // Scroll to the message
                        statusMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    });
                });
                
                // Setup field validation
                const inputs = form.querySelectorAll('input, textarea');
                inputs.forEach(input => {
                    input.addEventListener('blur', function() {
                        validateField(this);
                    });
                    
                    input.addEventListener('input', function() {
                        if (this.classList.contains('invalid')) {
                            validateField(this);
                        }
                    });
                });
            }
            
            // Validation functions
            function validateForm() {
                const inputs = form.querySelectorAll('input, textarea');
                let isValid = true;
                
                inputs.forEach(input => {
                    if (!validateField(input)) {
                        isValid = false;
                    }
                });
                
                return isValid;
            }
            
            function validateField(field) {
                // Skip fields without validation
                if (!field.hasAttribute('required') && !field.getAttribute('pattern')) {
                    return true;
                }
                
                let isValid = true;
                let errorMessage = '';
                
                // Check if required field is empty
                if (field.hasAttribute('required') && !field.value.trim()) {
                    isValid = false;
                    errorMessage = 'This field is required';
                }
                // Email validation
                else if (field.type === 'email' && field.value) {
                    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailPattern.test(field.value)) {
                        isValid = false;
                        errorMessage = 'Please enter a valid email address';
                    }
                }
                
                // Update field status
                if (isValid) {
                    field.classList.remove('invalid');
                    field.classList.add('valid');
                    
                    // Remove error message
                    const errorElement = field.parentNode.querySelector('.error-message');
                    if (errorElement) {
                        errorElement.remove();
                    }
                } else {
                    field.classList.remove('valid');
                    field.classList.add('invalid');
                    
                    // Add or update error message
                    let errorElement = field.parentNode.querySelector('.error-message');
                    if (!errorElement) {
                        errorElement = document.createElement('div');
                        errorElement.className = 'error-message';
                        field.parentNode.appendChild(errorElement);
                    }
                    errorElement.textContent = errorMessage;
                }
                
                return isValid;
            }
        });
    </script>
</body>
</html>
